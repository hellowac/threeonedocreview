(window["webpackJsonp_ThreeIntelligence"]=window["webpackJsonp_ThreeIntelligence"]||[]).push([["chunk-7c2e723a"],{"0143":function(e,t,a){},"0541":function(e,t,a){"use strict";var r=a("23e7"),n=a("1a2d");r({target:"Object",stat:!0},{hasOwn:n})},1413:function(e,t,a){"use strict";a("37b2")},"14d9":function(e,t,a){"use strict";var r=a("23e7"),n=a("7b0b"),o=a("07fa"),s=a("3a34"),l=a("3511"),i=a("d039"),u=i((function(){return 4294967297!==[].push.call({length:4294967296},1)})),c=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},d=u||!c();r({target:"Array",proto:!0,arity:1,forced:d},{push:function(e){var t=n(this),a=o(t),r=arguments.length;l(a+r);for(var i=0;i<r;i++)t[a]=arguments[i],a++;return s(t,a),a}})},"31be":function(e,t,a){"use strict";a("9838")},3511:function(e,t,a){"use strict";var r=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw r("Maximum allowed index exceeded");return e}},"37b2":function(e,t,a){},"3a34":function(e,t,a){"use strict";var r=a("83ab"),n=a("e8b5"),o=TypeError,s=Object.getOwnPropertyDescriptor,l=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=l?function(e,t){if(n(e)&&!s(e,"length").writable)throw new o("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},"47bc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"smart-review"},[t("ReviewListFilters",{on:{createProject:e.createProject,query:e.queryByForm}}),t("ReviewListTables",{attrs:{"table-data":e.tableData}}),t("Pagination",{staticClass:"module-page",attrs:{limit:e.pageLimit,total:e.tableDataTotal},on:{"update:limit":function(t){e.pageLimit=t},"update:total":function(t){e.tableDataTotal=t},pagination:e.handlePagination}})],1)},n=[],o=a("365c"),s=a("b48e"),l=function(){var e=this,t=e._self._c;return t("el-form",{attrs:{model:e.form,"label-width":"auto"}},[t("el-form-item",{attrs:{label:"任务名:"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.onQuery},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},e._l(e.taskNames,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"时间:"}},[t("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"开始日期","picker-options":e.starPickerOptions,size:"small"},on:{input:e.onQuery},model:{value:e.form.start_date,callback:function(t){e.$set(e.form,"start_date",t)},expression:"form.start_date"}}),t("span",[e._v("  ~  ")]),t("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"结束日期","picker-options":e.endPickerOptions,size:"small"},on:{input:e.onQuery},model:{value:e.form.end_date,callback:function(t){e.$set(e.form,"end_date",t)},expression:"form.end_date"}})],1),t("el-form-item",{attrs:{label:"状态:"}},[t("el-radio-group",{attrs:{"text-color":"#FFFFFF",fill:"rgba(5, 101, 98, 0.7)",size:"small"},on:{input:e.onQuery},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[t("el-radio",{attrs:{label:""}},[e._v("全部")]),t("el-radio",{attrs:{label:"PENDING"}},[e._v("待审查")]),t("el-radio",{attrs:{label:"SUCCESS"}},[e._v("审查成功")]),t("el-radio",{attrs:{label:"FAILURE"}},[e._v("审查失败")])],1)],1)],1)},i=[],u={name:"ReviewListFilters",data(){return{taskNames:[],form:{name:void 0,start_date:"",end_date:"",status:""},starPickerOptions:{disabledDate(e){return e.getTime()>Date.now()||e.getTime()<Date.parse("2025-05-31")},shortcuts:[{text:"今天",onClick(e){e.$emit("pick",new Date)}},{text:"昨天",onClick(e){const t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick(e){const t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},endPickerOptions:{disabledDate(e){return e.getTime()>Date.now()||e.getTime()<Date.parse("2025-05-31")},shortcuts:[{text:"今天",onClick(e){e.$emit("pick",new Date)}},{text:"昨天",onClick(e){const t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick(e){const t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},mounted(){this.fetchTaskNames()},methods:{fetchTaskNames(){Object(o["c"])("/celery/task/names").then(e=>{this.taskNames=e.data})},handlerType(e,t){this.queryForm[t]=e,console.log("queryForm:",this.queryForm)},disabledStartDate(e){return e.getTime()<new Date("2025-06-01")},disabledEndDate(e){return e.getTime()>Date.now()},onQuery(){this.$emit("query",this.form)}}},c=u,d=(a("87c1"),a("2877")),b=Object(d["a"])(c,l,i,!1,null,"52724c2f",null),f=b.exports,m=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{staticClass:"smart-review-tables",staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":e.setHeaderClassName,"max-height":800}},[t("el-table-column",{attrs:{prop:"id",width:"80",label:"序号"}}),t("el-table-column",{attrs:{prop:"kwargs_obj.proj_type",align:"center",width:"100",label:"类型"}}),t("el-table-column",{attrs:{prop:"name",label:"任务"}}),t("el-table-column",{attrs:{prop:"kwargs_obj.proj_name",label:"名称",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"对应提交",align:"center"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",{staticClass:"submit-num"},[e._v("第"+e._s(a.kwargs_obj.proj_version)+"次")])]}}])}),t("el-table-column",{attrs:{prop:"done_at",label:"时间",align:"center"}}),t("el-table-column",{attrs:{align:"center",width:"100",label:"状态"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",{staticClass:"tag-span",style:{"--colors":e.tagColors[a.status]}},[e._v(e._s(e.tagNames[a.status]))])]}}])}),t("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{attrs:{size:"small",type:"text",disabled:"SUCCESS"!==a.status},on:{click:function(t){return e.showResult(a)}}},[e._v("过程详情")]),t("el-button",{attrs:{size:"small",type:"text",disabled:"FAILURE"!==a.status},on:{click:function(t){return e.showTracback(a)}}},[e._v("错误详情")])]}}])})],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("pre",{staticStyle:{height:"500px",overflow:"scroll"},domProps:{innerHTML:e._s(e.dialogContent)}})])],1)},p=[],g={props:{tableData:{type:Array,required:!0,default:()=>[]}},data(){return{dialogTitle:"",dialogVisible:!1,dialogContent:"",customColors:[{color:"rgba(5, 101, 98, 0.2)",percentage:20},{color:"rgba(5, 101, 98, 0.4)",percentage:40},{color:"rgba(5, 101, 98, 0.6)",percentage:60},{color:"rgba(5, 101, 98, 0.8)",percentage:80},{color:"rgba(5, 101, 98, 1)",percentage:100}],tagColors:{PENDING:"rgba(22, 155, 213, 0.7)",SUCCESS:"rgba(70, 158, 134, 1)",FAILURE:"rgba(5, 101, 98, 1)"},tagNames:{PENDING:"待审查",SUCCESS:"审查成功",FAILURE:"审查失败"}}},mounted(){},methods:{setHeaderClassName(){return{borderBottom:"none",backgroundColor:"rgba(5, 101, 98, 0.7)",color:"#fff"}},showResult(e){this.dialogTitle=`${e.kwargs_obj.proj_name}(第${e.kwargs_obj.proj_version}次提交)`,this.dialogContent=e.result,this.dialogVisible=!0},showTracback(e){this.dialogTitle=`${e.kwargs_obj.proj_name}(第${e.kwargs_obj.proj_version}次提交)`,this.dialogContent=e.traceback,this.dialogVisible=!0}}},h=g,y=(a("1413"),Object(d["a"])(h,m,p,!1,null,null,null)),_=y.exports,w={name:"SmartReview",components:{ReviewListFilters:f,ReviewListTables:_},data(){return{querySkip:0,queryLimit:10,queryParams:{},tableData:[{result:"2025-06-20 10:41:33 - 项目:【V明南】【第1次提交】开始审查...\n2025-06-20 10:41:33 - 项目:【V明南】【第1次提交】的【一、工程概况及施工作业特点】开始审查.\n2025-06-20 10:41:37 - 项目:【V明南】【第1次提交】的【一、工程概况及施工作业特点】审查完成.\n2025-06-20 10:41:37 - 项目:【V明南】【第1次提交】中【二、施工作业计划工期、开(峻)工时间】的内容提取失败，无法审查.\n2025-06-20 10:41:37 - 项目:【V明南】【第1次提交】的【三、停电范围】开始审查.\n2025-06-20 10:41:44 - 项目:【V明南】【第1次提交】的【三、停电范围】审查完成.\n2025-06-20 10:41:44 - 项目:【V明南】【第1次提交】的【四、作业主要内容】开始审查.\n2025-06-20 10:41:48 - 项目:【V明南】【第1次提交】的【四、作业主要内容】审查完成.\n2025-06-20 10:41:48 - 项目:【V明南】【第1次提交】的【五、组织措施】开始审查.\n2025-06-20 10:41:54 - 项目:【V明南】【第1次提交】的【五、组织措施】审查完成.\n2025-06-20 10:41:54 - 项目:【V明南】【第1次提交】的【六、技术措施】开始审查.\n2025-06-20 10:41:56 - 项目:【V明南】【第1次提交】的【六、技术措施】审查完成.\n2025-06-20 10:41:56 - 项目:【V明南】【第1次提交】中【七、安全措施】的内容提取失败，无法审查.\n2025-06-20 10:41:56 - 项目:【V明南】【第1次提交】的【八、应急处置措施】开始审查.\n2025-06-20 10:42:00 - 项目:【V明南】【第1次提交】的【八、应急处置措施】审查完成.\n2025-06-20 10:42:00 - 项目:【V明南】【第1次提交】的【九、施工作业工艺标准及验收】开始审查.\n2025-06-20 10:42:03 - 项目:【V明南】【第1次提交】的【九、施工作业工艺标准及验收】审查完成.\n2025-06-20 10:42:03 - 项目:【V明南】【第1次提交】的【十、现场作业示意图】开始审查.\n2025-06-20 10:42:10 - 项目:【V明南】【第1次提交】的【十、现场作业示意图】审查完成.\n2025-06-20 10:42:10 - 项目:【V明南】【第1次提交】审查完成.",date_done:"2025-06-20T02:42:10",name:"app.tasks.reviews.review_by_agent",kwargs:'{"proj_name": "V\\u660e\\u5357", "proj_version": 1, "proj_type": "\\u8f93\\u7535", "proj_id": {"__type__": "uuid", "__value__": {"hex": "e674632a0a7f4ace91db15ab1c9d4587"}}}',worker:"celery@fxxdeMac-mini.local",retries:0,status:"SUCCESS",id:7,task_id:"b966bd8e-5ef6-4134-90d8-a697b56689e4",traceback:null,args:'[{"\\u6587\\u6863\\u5168\\u90e8\\u5185\\u5bb9": "441108eb2e474eef97e31b2284f406d4", "\\u6587\\u6863\\u5934/\\u5c01\\u9762": "06d2398f08ee4ddebf8d2708eada02dc", "\\u4e00\\u3001\\u5de5\\u7a0b\\u6982\\u51b5\\u53ca\\u65bd\\u5de5\\u4f5c\\u4e1a\\u7279\\u70b9": "bc408ba6c3f64349838cbb5579c7a6f1", "\\u4e09\\u3001\\u505c\\u7535\\u8303\\u56f4": "dc21a5df60504094bafbf3f31a070ccf", "\\u56db\\u3001\\u4f5c\\u4e1a\\u4e3b\\u8981\\u5185\\u5bb9": "b9a26a1617214c37a2b3881fb8061727", "\\u4e94\\u3001\\u7ec4\\u7ec7\\u63aa\\u65bd": "59eee6f77f924dc1b34f7989ea96c3fc", "\\u516d\\u3001\\u6280\\u672f\\u63aa\\u65bd": "b41ed826f3644eca9cc46259aaf06154", "\\u516b\\u3001\\u5e94\\u6025\\u5904\\u7f6e\\u63aa\\u65bd": "e6674d0e37804697bf6de2808d8e467e", "\\u4e5d\\u3001\\u65bd\\u5de5\\u4f5c\\u4e1a\\u5de5\\u827a\\u6807\\u51c6\\u53ca\\u9a8c\\u6536": "145166d092ef4ed2949b7887c0505d70", "\\u5341\\u3001\\u73b0\\u573a\\u4f5c\\u4e1a\\u793a\\u610f\\u56fe": "c29c353f394548c4b81c7a0fd4380787"}]',queue:"celery",kwargs_obj:{proj_name:"V明南",proj_version:1,proj_type:"输电",proj_id:"e674632a0a7f4ace91db15ab1c9d4587"},done_at:"2025-06-20 10:42:10"}],tableDataTotal:0,pageLimit:10}},async mounted(){this.searchResult()},methods:{createProject(){this.$refs.createNewProject.show()},queryByForm(e){console.log("查询celery结果: ",e),this.queryParams=Object(s["a"])(e),console.log(this.queryParams),this.searchResult()},searchResult(){try{Object(o["c"])("/celery/result",this.queryParams).then(e=>{this.tableData=e.data.data,this.tableDataTotal=e.data.count})}catch(e){console.error("搜索失败:",e),this.$message.error("Oops, 搜索失败: "+e)}},handlePagination(e){console.log("处理分页:",e),this.queryParams.skip=e.page>1?(e.page-1)*e.limit:0,this.queryParams.limit=e.limit,this.searchResult()}}},k=w,v=(a("31be"),Object(d["a"])(k,r,n,!1,null,"f6686c4a",null));t["default"]=v.exports},"87c1":function(e,t,a){"use strict";a("0143")},9838:function(e,t,a){},b48e:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("14d9"),a("13d5"),a("0541"),a("4360");function r(e){return Object.entries(e).reduce((e,[t,a])=>(null!==a&&""!==a&&(e[t]=a),e),{})}},e8b5:function(e,t,a){"use strict";var r=a("c6b6");e.exports=Array.isArray||function(e){return"Array"===r(e)}}}]);